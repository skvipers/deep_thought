# üéÆ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–ø–∞—É–Ω–∞ –ø–µ—à–µ–∫

## üìã **–û–±–∑–æ—Ä**

–°–∏—Å—Ç–µ–º–∞ —Å–ø–∞—É–Ω–∞ –ø–µ—à–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Å—Ü–µ–Ω—É Plot –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—à–∫–∏ –≤ –º–∏—Ä–µ.

## üîß **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:**

### **1. SpawnManager**
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `addons/deep_thought/core/pawns/spawn/spawn_manager.gd`
- **–§—É–Ω–∫—Ü–∏—è**: –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–ø–∞—É–Ω–∞ –ø–µ—à–µ–∫
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**:
  - `pawn_scene`: –°—Ü–µ–Ω–∞ –ø–µ—à–∫–∏ –¥–ª—è —Å–ø–∞—É–Ω–∞
  - `world_generator`: –°—Å—ã–ª–∫–∞ –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∏—Ä–∞
  - `auto_spawn_on_ready`: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞—É–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  - `spawn_count`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—à–µ–∫ –¥–ª—è —Å–ø–∞—É–Ω–∞
  - `spawn_height_offset`: –í—ã—Å–æ—Ç–∞ —Å–ø–∞—É–Ω–∞ –Ω–∞–¥ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å—é

### **2. SpawnController**
- **–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `scripts/spawn_controller.gd`
- **–§—É–Ω–∫—Ü–∏—è**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∞—É–Ω–æ–º —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏—à–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**:
  - `S` - –°–ø–∞—É–Ω –æ–¥–Ω–æ–π –ø–µ—à–∫–∏
  - `M` - –°–ø–∞—É–Ω –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–µ—à–µ–∫
  - `C` - –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ—Ö –ø–µ—à–µ–∫
  - `I` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø–∞—É–Ω–µ

## üöÄ **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:**

### **1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ —Å—Ü–µ–Ω–µ Plot:**
```gdscript
# SpawnManager —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —Å—Ü–µ–Ω–µ
# - pawn_scene = Pawn.tscn
# - world_generator = Plot (WorldPreview)
# - auto_spawn_on_ready = true
# - spawn_count = 3
# - spawn_height_offset = 2.0
```

### **2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏—à–∏:**
```
S - –°–ø–∞—É–Ω –æ–¥–Ω–æ–π –ø–µ—à–∫–∏
M - –°–ø–∞—É–Ω –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–µ—à–µ–∫
C - –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ—Ö –ø–µ—à–µ–∫
I - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–ø–∞—É–Ω–µ
```

### **3. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```gdscript
# –ü–æ–ª—É—á–∏—Ç—å SpawnManager
var spawn_manager = get_node("SpawnManager")

# –°–ø–∞—É–Ω –ø–µ—à–µ–∫
spawn_manager.spawn_pawns(5)

# –°–ø–∞—É–Ω –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
spawn_manager.spawn_pawn_at_position(Vector3(0, 10, 0))

# –û—á–∏—Å—Ç–∫–∞
spawn_manager.clear_spawned_pawns()

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
var info = spawn_manager.get_spawn_info()
print("–ü–µ—à–µ–∫: " + str(info.spawned_count))
```

## üìÅ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:**

```
scenes/world/Plot.tscn
‚îú‚îÄ‚îÄ SpawnManager (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∞—É–Ω–æ–º)
‚îú‚îÄ‚îÄ SpawnController (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞–≤–∏—à–∞–º–∏)
‚îî‚îÄ‚îÄ WorldPreview (–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–∏—Ä–∞)

scenes/pawns/Pawn.tscn
‚îú‚îÄ‚îÄ CharacterBody3D (—Ñ–∏–∑–∏–∫–∞)
‚îú‚îÄ‚îÄ PawnVisual (–≤–∏–∑—É–∞–ª)
‚îú‚îÄ‚îÄ PawnController (–¥–≤–∏–∂–µ–Ω–∏–µ)
‚îî‚îÄ‚îÄ AutoCollisionSystem (–∫–æ–ª–ª–∏–∑–∏–∏)

scripts/spawn_controller.gd
‚îî‚îÄ‚îÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏—à–∏
```

## ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:**

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞—É–Ω:**
```gdscript
# –í SpawnManager
auto_spawn_on_ready = true
spawn_count = 3
spawn_height_offset = 2.0
```

### **–†—É—á–Ω–æ–π —Å–ø–∞—É–Ω:**
```gdscript
# –ß–µ—Ä–µ–∑ SpawnController
# –ù–∞–∂–º–∏—Ç–µ S –¥–ª—è —Å–ø–∞—É–Ω–∞ –æ–¥–Ω–æ–π –ø–µ—à–∫–∏
# –ù–∞–∂–º–∏—Ç–µ M –¥–ª—è —Å–ø–∞—É–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–µ—à–µ–∫
```

### **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ —Å–ø–∞—É–Ω–∞:**
```gdscript
# –°–ø–∞—É–Ω –≤ —Ü–µ–Ω—Ç—Ä–µ –º–∏—Ä–∞
spawn_manager.spawn_pawn_at_position(Vector3(0, 10, 0))

# –°–ø–∞—É–Ω –≤ —Å–ª—É—á–∞–π–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
var random_pos = Vector3(randf_range(-50, 50), 10, randf_range(-50, 50))
spawn_manager.spawn_pawn_at_position(random_pos)
```

## üéØ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∏–≥—Ä–µ:**

### **1. –ó–∞–ø—É—Å–∫ —Å—Ü–µ–Ω—ã Plot:**
- –ü–µ—à–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤—è—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### **2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –¥—Ä—É–≥–∏–µ —Å—Ü–µ–Ω—ã:**
```gdscript
# –î–æ–±–∞–≤–∏—Ç—å –≤ –ª—é–±—É—é —Å—Ü–µ–Ω—É
@export var spawn_manager: SpawnManager

func _ready():
    spawn_manager.spawn_pawns(1)
```

### **3. –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è:**
```gdscript
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–ø–∞—É–Ω–∞
spawn_manager.spawn_height_offset = 5.0
spawn_manager.max_spawned_pawns = 20
spawn_manager.spawn_delay = 0.5
```

## üîç **–û—Ç–ª–∞–¥–∫–∞:**

### **–õ–æ–≥–∏:**
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Logger
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```gdscript
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–µ—à–µ–∫
var info = spawn_manager.get_spawn_info()
print("–ü–µ—à–µ–∫ –≤ –º–∏—Ä–µ: " + str(info.spawned_count))

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
print("–ê–≤—Ç–æ—Å–ø–∞—É–Ω: " + str(info.auto_spawn))
print("–ú–∞–∫—Å–∏–º—É–º –ø–µ—à–µ–∫: " + str(info.max_spawned))
```

## üö® **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### **1. –ü–µ—à–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `pawn_scene` –≤ SpawnManager
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `world_generator` –Ω–∞–∑–Ω–∞—á–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### **2. –ü–µ—à–∫–∏ –ø–∞–¥–∞—é—Ç –ø–æ–¥ –∑–µ–º–ª—é:**
- –£–≤–µ–ª–∏—á—å—Ç–µ `spawn_height_offset` –≤ SpawnManager
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—ã—Å–æ—Ç—É –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ –≤ –º–∏—Ä–µ

### **3. –ö–ª–∞–≤–∏—à–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SpawnController –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Å—Ü–µ–Ω—É
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `spawn_manager` –Ω–∞–∑–Ω–∞—á–µ–Ω

## ‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–°–∏—Å—Ç–µ–º–∞ —Å–ø–∞—É–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ü–µ–Ω—É Plot –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞–≤–∏—à–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ø–∞—É–Ω–æ–º –ø–µ—à–µ–∫. 